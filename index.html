<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>D Mobiles & Home Appliances - Best Electronics Store in India</title>
  <meta name="description" content="Shop the latest mobiles, tablets, refrigerators, washing machines, and air conditioners at the best prices. Free delivery, easy EMI, and genuine warranty." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            background: 'hsl(0 0% 98%)',
            foreground: 'hsl(220 20% 10%)',
            card: 'hsl(0 0% 100%)',
            'card-foreground': 'hsl(220 20% 10%)',
            popover: 'hsl(0 0% 100%)',
            'popover-foreground': 'hsl(220 20% 10%)',
            primary: 'hsl(221 83% 53%)',
            'primary-foreground': 'hsl(0 0% 100%)',
            secondary: 'hsl(210 40% 96%)',
            'secondary-foreground': 'hsl(220 20% 10%)',
            muted: 'hsl(210 40% 96%)',
            'muted-foreground': 'hsl(215 16% 47%)',
            accent: 'hsl(25 95% 53%)',
            'accent-foreground': 'hsl(0 0% 100%)',
            destructive: 'hsl(0 84% 60%)',
            'destructive-foreground': 'hsl(0 0% 100%)',
            border: 'hsl(214 32% 91%)',
            input: 'hsl(214 32% 91%)',
            ring: 'hsl(221 83% 53%)',
            success: 'hsl(142 76% 36%)',
            'success-foreground': 'hsl(0 0% 100%)',
            warning: 'hsl(38 92% 50%)',
            'warning-foreground': 'hsl(0 0% 100%)',
            sale: 'hsl(0 84% 60%)',
            'sale-foreground': 'hsl(0 0% 100%)',
            rating: 'hsl(45 93% 47%)',
          },
          fontFamily: {
            sans: ['Poppins', 'sans-serif'],
          },
        },
      },
    }
  </script>
  <style>
    * { box-sizing: border-box; border-color: hsl(214 32% 91%); }
    body { font-family: 'Poppins', sans-serif; background: hsl(0 0% 98%); color: hsl(220 20% 10%); margin: 0; -webkit-font-smoothing: antialiased; }
    @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .animate-slide-up { animation: slideUp 0.3s ease-out; }
    .animate-fade-in { animation: fadeIn 0.3s ease-out; }
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .bg-gradient-primary { background: linear-gradient(135deg, hsl(221 83% 53%) 0%, hsl(221 83% 40%) 100%); }
    .bg-gradient-accent { background: linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(25 95% 45%) 100%); }
    .bg-gradient-hero { background: linear-gradient(135deg, hsl(221 83% 53%) 0%, hsl(240 60% 40%) 100%); }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, createContext, useContext, useCallback, useMemo } = React;

    // Products Data
    const products = [
      { id: 1, name: "Samsung Galaxy S24 Ultra 5G", brand: "Samsung", category: "mobiles", subcategory: "smartphones", price: 129999, mrp: 149999, discount: 13, rating: 4.7, reviews: 3542, image: "https://images.unsplash.com/photo-1610945265064-0e34e5519bbf?w=400", images: ["https://images.unsplash.com/photo-1610945265064-0e34e5519bbf?w=800", "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=800"], inStock: true, specs: { Display: "6.8 inch Dynamic AMOLED 2X", Processor: "Snapdragon 8 Gen 3", RAM: "12GB", Storage: "256GB", Battery: "5000mAh", Camera: "200MP + 12MP + 50MP + 10MP", OS: "Android 14" }, features: ["S Pen Included", "AI Features", "100x Space Zoom"], emi: "‚Çπ6,249/month" },
      { id: 2, name: "iPhone 15 Pro Max", brand: "Apple", category: "mobiles", subcategory: "smartphones", price: 159900, mrp: 179900, discount: 11, rating: 4.8, reviews: 5621, image: "https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=400", images: ["https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=800"], inStock: true, specs: { Display: "6.7 inch Super Retina XDR", Processor: "A17 Pro Chip", RAM: "8GB", Storage: "256GB", Battery: "4441mAh", Camera: "48MP + 12MP + 12MP", OS: "iOS 17" }, features: ["Titanium Design", "Action Button", "USB-C"], emi: "‚Çπ7,695/month" },
      { id: 3, name: "OnePlus 12 5G", brand: "OnePlus", category: "mobiles", subcategory: "smartphones", price: 64999, mrp: 69999, discount: 7, rating: 4.5, reviews: 2187, image: "https://images.unsplash.com/photo-1546054454-aa26e2b734c7?w=400", images: ["https://images.unsplash.com/photo-1546054454-aa26e2b734c7?w=800"], inStock: true, specs: { Display: "6.82 inch LTPO AMOLED", Processor: "Snapdragon 8 Gen 3", RAM: "12GB", Storage: "256GB", Battery: "5400mAh", Camera: "50MP + 64MP + 48MP", OS: "Android 14" }, features: ["100W SUPERVOOC", "Hasselblad Camera", "Aqua Touch"], emi: "‚Çπ3,124/month" },
      { id: 4, name: "Redmi Note 13 Pro+ 5G", brand: "Xiaomi", category: "mobiles", subcategory: "smartphones", price: 31999, mrp: 35999, discount: 11, rating: 4.3, reviews: 4521, image: "https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=400", images: ["https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=800"], inStock: true, specs: { Display: "6.67 inch AMOLED", Processor: "MediaTek Dimensity 7200", RAM: "8GB", Storage: "256GB", Battery: "5000mAh", Camera: "200MP + 8MP + 2MP", OS: "Android 13" }, features: ["120W HyperCharge", "IP68 Rating", "Curved Display"], emi: "‚Çπ1,539/month" },
      { id: 5, name: "Vivo V30 Pro 5G", brand: "Vivo", category: "mobiles", subcategory: "smartphones", price: 46999, mrp: 51999, discount: 10, rating: 4.4, reviews: 1823, image: "https://images.unsplash.com/photo-1574944985070-8f3ebc6b79d2?w=400", images: ["https://images.unsplash.com/photo-1574944985070-8f3ebc6b79d2?w=800"], inStock: true, specs: { Display: "6.78 inch AMOLED", Processor: "MediaTek Dimensity 8200", RAM: "12GB", Storage: "256GB", Battery: "5000mAh", Camera: "50MP + 50MP", OS: "Android 14" }, features: ["ZEISS Optics", "3D Curved Display", "Aura Light"], emi: "‚Çπ2,260/month" },
      { id: 6, name: "Realme GT 5 Pro", brand: "Realme", category: "mobiles", subcategory: "smartphones", price: 42999, mrp: 47999, discount: 10, rating: 4.4, reviews: 1456, image: "https://images.unsplash.com/photo-1605236453806-6ff36851218e?w=400", images: ["https://images.unsplash.com/photo-1605236453806-6ff36851218e?w=800"], inStock: true, specs: { Display: "6.78 inch AMOLED", Processor: "Snapdragon 8 Gen 3", RAM: "12GB", Storage: "256GB", Battery: "5400mAh", Camera: "50MP + 8MP + 50MP", OS: "Android 14" }, features: ["100W Charging", "Sony IMX890", "Gaming Mode"], emi: "‚Çπ2,068/month" },
      { id: 7, name: "Samsung Galaxy A54 5G", brand: "Samsung", category: "mobiles", subcategory: "smartphones", price: 32999, mrp: 38999, discount: 15, rating: 4.2, reviews: 6789, image: "https://images.unsplash.com/photo-1610945264803-c22b62d2a7b3?w=400", images: ["https://images.unsplash.com/photo-1610945264803-c22b62d2a7b3?w=800"], inStock: true, specs: { Display: "6.4 inch Super AMOLED", Processor: "Exynos 1380", RAM: "8GB", Storage: "128GB", Battery: "5000mAh", Camera: "50MP + 12MP + 5MP", OS: "Android 13" }, features: ["IP67 Rating", "Gorilla Glass 5", "One UI 5.1"], emi: "‚Çπ1,587/month" },
      { id: 8, name: "iPhone 15", brand: "Apple", category: "mobiles", subcategory: "smartphones", price: 79900, mrp: 89900, discount: 11, rating: 4.6, reviews: 3456, image: "https://images.unsplash.com/photo-1510557880182-3d4d3cba35a5?w=400", images: ["https://images.unsplash.com/photo-1510557880182-3d4d3cba35a5?w=800"], inStock: true, specs: { Display: "6.1 inch Super Retina XDR", Processor: "A16 Bionic", RAM: "6GB", Storage: "128GB", Battery: "3349mAh", Camera: "48MP + 12MP", OS: "iOS 17" }, features: ["Dynamic Island", "USB-C", "Ceramic Shield"], emi: "‚Çπ3,843/month" },
      { id: 9, name: "Motorola Edge 50 Pro", brand: "Motorola", category: "mobiles", subcategory: "smartphones", price: 35999, mrp: 39999, discount: 10, rating: 4.3, reviews: 987, image: "https://images.unsplash.com/photo-1512054502232-10a0a035d672?w=400", images: ["https://images.unsplash.com/photo-1512054502232-10a0a035d672?w=800"], inStock: true, specs: { Display: "6.7 inch pOLED", Processor: "Snapdragon 7 Gen 3", RAM: "12GB", Storage: "256GB", Battery: "4500mAh", Camera: "50MP + 13MP + 10MP", OS: "Android 14" }, features: ["125W TurboPower", "Pantone Validated", "Ready For"], emi: "‚Çπ1,731/month" },
      { id: 10, name: "Nothing Phone 2", brand: "Nothing", category: "mobiles", subcategory: "smartphones", price: 44999, mrp: 49999, discount: 10, rating: 4.4, reviews: 2134, image: "https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400", images: ["https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=800"], inStock: true, specs: { Display: "6.7 inch LTPO OLED", Processor: "Snapdragon 8+ Gen 1", RAM: "12GB", Storage: "256GB", Battery: "4700mAh", Camera: "50MP + 50MP", OS: "Android 14" }, features: ["Glyph Interface", "45W Fast Charging", "Pure Android"], emi: "‚Çπ2,164/month" },
      { id: 11, name: "iPad Pro 12.9 M2", brand: "Apple", category: "mobiles", subcategory: "tablets", price: 112900, mrp: 124900, discount: 10, rating: 4.9, reviews: 1876, image: "https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=400", images: ["https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=800"], inStock: true, specs: { Display: "12.9 inch Liquid Retina XDR", Processor: "Apple M2", RAM: "8GB", Storage: "128GB", Battery: "10758mAh", Camera: "12MP + 10MP", OS: "iPadOS 17" }, features: ["ProMotion", "Face ID", "Thunderbolt/USB 4"], emi: "‚Çπ5,431/month" },
      { id: 12, name: "Samsung Galaxy Tab S9 Ultra", brand: "Samsung", category: "mobiles", subcategory: "tablets", price: 108999, mrp: 124999, discount: 13, rating: 4.7, reviews: 654, image: "https://images.unsplash.com/photo-1561154464-82e9adf32764?w=400", images: ["https://images.unsplash.com/photo-1561154464-82e9adf32764?w=800"], inStock: true, specs: { Display: "14.6 inch Dynamic AMOLED 2X", Processor: "Snapdragon 8 Gen 2", RAM: "12GB", Storage: "256GB", Battery: "11200mAh", Camera: "13MP + 8MP", OS: "Android 13" }, features: ["S Pen Included", "IP68 Rating", "DeX Mode"], emi: "‚Çπ5,243/month" },
      { id: 13, name: "OnePlus Pad", brand: "OnePlus", category: "mobiles", subcategory: "tablets", price: 37999, mrp: 42999, discount: 12, rating: 4.4, reviews: 1234, image: "https://images.unsplash.com/photo-1585790050230-5dd28404ccb9?w=400", images: ["https://images.unsplash.com/photo-1585790050230-5dd28404ccb9?w=800"], inStock: true, specs: { Display: "11.61 inch LCD", Processor: "MediaTek Dimensity 9000", RAM: "8GB", Storage: "128GB", Battery: "9510mAh", Camera: "13MP", OS: "Android 13" }, features: ["Dolby Vision", "67W SUPERVOOC", "Cellular Option"], emi: "‚Çπ1,828/month" },
      { id: 14, name: "Lenovo Tab P12 Pro", brand: "Lenovo", category: "mobiles", subcategory: "tablets", price: 52999, mrp: 59999, discount: 12, rating: 4.3, reviews: 543, image: "https://images.unsplash.com/photo-1589739900243-4b52cd9b104e?w=400", images: ["https://images.unsplash.com/photo-1589739900243-4b52cd9b104e?w=800"], inStock: false, specs: { Display: "12.6 inch AMOLED", Processor: "Snapdragon 870", RAM: "8GB", Storage: "256GB", Battery: "10200mAh", Camera: "13MP + 5MP", OS: "Android 12" }, features: ["Precision Pen 3", "JBL Speakers", "Productivity Mode"], emi: "‚Çπ2,549/month" },
      { id: 15, name: "LG 655L Side by Side Refrigerator", brand: "LG", category: "appliances", subcategory: "refrigerators", price: 89990, mrp: 119990, discount: 25, rating: 4.5, reviews: 2341, image: "https://images.unsplash.com/photo-1571175443880-49e1d25b2bc5?w=400", images: ["https://images.unsplash.com/photo-1571175443880-49e1d25b2bc5?w=800"], inStock: true, specs: { Capacity: "655 Litres", Type: "Side by Side", "Energy Rating": "3 Star", Compressor: "Inverter Linear", "Ice Maker": "Yes", "Door Cooling+": "Yes" }, features: ["Smart Diagnosis", "Door-in-Door", "Hygiene Fresh+"], emi: "‚Çπ4,329/month" },
      { id: 16, name: "Samsung 653L Triple Door", brand: "Samsung", category: "appliances", subcategory: "refrigerators", price: 94990, mrp: 124990, discount: 24, rating: 4.4, reviews: 1876, image: "https://images.unsplash.com/photo-1584568694244-14fbdf83bd30?w=400", images: ["https://images.unsplash.com/photo-1584568694244-14fbdf83bd30?w=800"], inStock: true, specs: { Capacity: "653 Litres", Type: "French Door", "Energy Rating": "2 Star", Compressor: "Digital Inverter", "Ice Maker": "Yes", "Twin Cooling Plus": "Yes" }, features: ["Family Hub", "Metal Cooling", "FlexZone"], emi: "‚Çπ4,570/month" },
      { id: 17, name: "Whirlpool 265L Double Door", brand: "Whirlpool", category: "appliances", subcategory: "refrigerators", price: 28990, mrp: 37990, discount: 24, rating: 4.2, reviews: 4532, image: "https://images.unsplash.com/photo-1536353284924-9220c464e262?w=400", images: ["https://images.unsplash.com/photo-1536353284924-9220c464e262?w=800"], inStock: true, specs: { Capacity: "265 Litres", Type: "Double Door", "Energy Rating": "3 Star", Compressor: "IntelliSense Inverter", "Ice Maker": "Yes", "Zeolite Technology": "Yes" }, features: ["MicroBlock", "6th Sense", "Fresh Flow Air Tower"], emi: "‚Çπ1,394/month" },
      { id: 18, name: "Haier 320L Double Door", brand: "Haier", category: "appliances", subcategory: "refrigerators", price: 31990, mrp: 43990, discount: 27, rating: 4.1, reviews: 2134, image: "https://images.unsplash.com/photo-1594635844945-dabb3f2bb2b2?w=400", images: ["https://images.unsplash.com/photo-1594635844945-dabb3f2bb2b2?w=800"], inStock: true, specs: { Capacity: "320 Litres", Type: "Double Door", "Energy Rating": "3 Star", Compressor: "Twin Inverter", "Ice Maker": "Yes", "Magic Cooling": "Yes" }, features: ["1 Hour Icing", "Turbo Icing", "Stabilizer Free"], emi: "‚Çπ1,539/month" },
      { id: 19, name: "Godrej 564L Side by Side", brand: "Godrej", category: "appliances", subcategory: "refrigerators", price: 62990, mrp: 79990, discount: 21, rating: 4.3, reviews: 876, image: "https://images.unsplash.com/photo-1588854337236-6889d631faa8?w=400", images: ["https://images.unsplash.com/photo-1588854337236-6889d631faa8?w=800"], inStock: true, specs: { Capacity: "564 Litres", Type: "Side by Side", "Energy Rating": "3 Star", Compressor: "Inverter", "Ice Maker": "Yes", "Cool Shower": "Yes" }, features: ["Aroma Lock", "Stay Fresh", "Humidity Control"], emi: "‚Çπ3,030/month" },
      { id: 20, name: "IFB 8kg Front Load", brand: "IFB", category: "appliances", subcategory: "washing-machines", price: 38990, mrp: 49990, discount: 22, rating: 4.4, reviews: 3421, image: "https://images.unsplash.com/photo-1626806787461-102c1bfaaea1?w=400", images: ["https://images.unsplash.com/photo-1626806787461-102c1bfaaea1?w=800"], inStock: true, specs: { Capacity: "8 kg", Type: "Front Load", "Energy Rating": "5 Star", RPM: "1400", "Wash Programs": "12", "In-built Heater": "Yes" }, features: ["Aqua Energie", "Crescent Moon Drum", "3D Wash"], emi: "‚Çπ1,875/month" },
      { id: 21, name: "LG 9kg AI DD Front Load", brand: "LG", category: "appliances", subcategory: "washing-machines", price: 48990, mrp: 59990, discount: 18, rating: 4.6, reviews: 2187, image: "https://images.unsplash.com/photo-1610557892470-55d9e80c0bce?w=400", images: ["https://images.unsplash.com/photo-1610557892470-55d9e80c0bce?w=800"], inStock: true, specs: { Capacity: "9 kg", Type: "Front Load", "Energy Rating": "5 Star", RPM: "1400", "Wash Programs": "14", "In-built Heater": "Yes" }, features: ["AI Direct Drive", "Steam+", "TurboWash 360"], emi: "‚Çπ2,356/month" },
      { id: 22, name: "Samsung 7kg Fully Automatic", brand: "Samsung", category: "appliances", subcategory: "washing-machines", price: 22990, mrp: 29990, discount: 23, rating: 4.2, reviews: 5432, image: "https://images.unsplash.com/photo-1604335399105-a0c585fd81a1?w=400", images: ["https://images.unsplash.com/photo-1604335399105-a0c585fd81a1?w=800"], inStock: true, specs: { Capacity: "7 kg", Type: "Top Load", "Energy Rating": "5 Star", RPM: "700", "Wash Programs": "6", "Wobble Technology": "Yes" }, features: ["Diamond Drum", "Magic Dispenser", "Digital Inverter"], emi: "‚Çπ1,106/month" },
      { id: 23, name: "Bosch 8kg Front Load", brand: "Bosch", category: "appliances", subcategory: "washing-machines", price: 45990, mrp: 57990, discount: 21, rating: 4.5, reviews: 1654, image: "https://images.unsplash.com/photo-1582735689369-4fe89db7114c?w=400", images: ["https://images.unsplash.com/photo-1582735689369-4fe89db7114c?w=800"], inStock: true, specs: { Capacity: "8 kg", Type: "Front Load", "Energy Rating": "5 Star", RPM: "1200", "Wash Programs": "15", "In-built Heater": "Yes" }, features: ["EcoSilence Drive", "ActiveWater Plus", "VarioDrum"], emi: "‚Çπ2,212/month" },
      { id: 24, name: "Whirlpool 7.5kg Semi-Automatic", brand: "Whirlpool", category: "appliances", subcategory: "washing-machines", price: 12990, mrp: 16990, discount: 24, rating: 4.0, reviews: 7654, image: "https://images.unsplash.com/photo-1517677208171-0bc6725a3e60?w=400", images: ["https://images.unsplash.com/photo-1517677208171-0bc6725a3e60?w=800"], inStock: true, specs: { Capacity: "7.5 kg", Type: "Semi-Automatic", "Energy Rating": "5 Star", RPM: "1400", "Wash Programs": "3", "Turbo Scrub": "Yes" }, features: ["Super Soak", "Turbo Scrub", "Rust Free Body"], emi: "‚Çπ625/month" },
      { id: 25, name: "Voltas 1.5 Ton 5 Star Inverter", brand: "Voltas", category: "appliances", subcategory: "air-conditioners", price: 42990, mrp: 57990, discount: 26, rating: 4.3, reviews: 3876, image: "https://images.unsplash.com/photo-1628744448840-55bdb2497bd4?w=400", images: ["https://images.unsplash.com/photo-1628744448840-55bdb2497bd4?w=800"], inStock: true, specs: { Capacity: "1.5 Ton", "Energy Rating": "5 Star", Type: "Split Inverter", Compressor: "Inverter", Refrigerant: "R32", "Copper Condenser": "Yes" }, features: ["Steady Cool", "Anti Dust Filter", "Self Diagnosis"], emi: "‚Çπ2,068/month" },
      { id: 26, name: "Daikin 1.5 Ton 3 Star", brand: "Daikin", category: "appliances", subcategory: "air-conditioners", price: 45990, mrp: 59990, discount: 23, rating: 4.5, reviews: 2543, image: "https://images.unsplash.com/photo-1625245488600-f03fef636a3c?w=400", images: ["https://images.unsplash.com/photo-1625245488600-f03fef636a3c?w=800"], inStock: true, specs: { Capacity: "1.5 Ton", "Energy Rating": "3 Star", Type: "Split Inverter", Compressor: "Inverter", Refrigerant: "R32", "Copper Condenser": "Yes" }, features: ["Power Chill", "Econo Mode", "Coanda Airflow"], emi: "‚Çπ2,212/month" },
      { id: 27, name: "Blue Star 1 Ton 5 Star Inverter", brand: "Blue Star", category: "appliances", subcategory: "air-conditioners", price: 38990, mrp: 51990, discount: 25, rating: 4.4, reviews: 1987, image: "https://images.unsplash.com/photo-1580595999172-787d2db6a08c?w=400", images: ["https://images.unsplash.com/photo-1580595999172-787d2db6a08c?w=800"], inStock: true, specs: { Capacity: "1 Ton", "Energy Rating": "5 Star", Type: "Split Inverter", Compressor: "Inverter", Refrigerant: "R410A", "Copper Condenser": "Yes" }, features: ["Turbo Cool", "Self Clean", "Smart Ready"], emi: "‚Çπ1,875/month" },
      { id: 28, name: "LG 2 Ton 3 Star Dual Inverter", brand: "LG", category: "appliances", subcategory: "air-conditioners", price: 62990, mrp: 79990, discount: 21, rating: 4.6, reviews: 3210, image: "https://images.unsplash.com/photo-1606904825846-647eb07f5be2?w=400", images: ["https://images.unsplash.com/photo-1606904825846-647eb07f5be2?w=800"], inStock: true, specs: { Capacity: "2 Ton", "Energy Rating": "3 Star", Type: "Split Dual Inverter", Compressor: "Dual Inverter", Refrigerant: "R32", "Copper Condenser": "Yes" }, features: ["ThinQ App", "Himalaya Cool", "Ocean Black Fin"], emi: "‚Çπ3,030/month" },
      { id: 29, name: "Carrier 1.5 Ton 5 Star Inverter", brand: "Carrier", category: "appliances", subcategory: "air-conditioners", price: 44990, mrp: 58990, discount: 24, rating: 4.3, reviews: 1432, image: "https://images.unsplash.com/photo-1596552183299-000ef779e88d?w=400", images: ["https://images.unsplash.com/photo-1596552183299-000ef779e88d?w=800"], inStock: true, specs: { Capacity: "1.5 Ton", "Energy Rating": "5 Star", Type: "Split Inverter", Compressor: "Flexicool Inverter", Refrigerant: "R32", "Copper Condenser": "Yes" }, features: ["Flexicool", "PM 2.5 Filter", "Auto Cleanser"], emi: "‚Çπ2,164/month" }
    ];

    const categories = [
      { id: "mobiles", name: "Mobiles & Tablets", icon: "üì±", image: "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400" },
      { id: "appliances", name: "Home Appliances", icon: "üè†", image: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400" }
    ];

    const brands = ["Samsung", "Apple", "OnePlus", "Xiaomi", "Vivo", "Realme", "Motorola", "Nothing", "Lenovo", "LG", "Whirlpool", "Haier", "Godrej", "IFB", "Bosch", "Voltas", "Daikin", "Blue Star", "Carrier"];

    const getProductsByCategory = (category) => products.filter(p => p.category === category);
    const getProductById = (id) => products.find(p => p.id === id);
    const getFeaturedProducts = () => products.filter(p => p.rating >= 4.5).slice(0, 8);
    const getBestSellers = () => [...products].sort((a, b) => b.reviews - a.reviews).slice(0, 8);

    // Toast Context
    const ToastContext = createContext();
    const ToastProvider = ({ children }) => {
      const [toasts, setToasts] = useState([]);
      const toast = useCallback(({ title, description, variant }) => {
        const id = Date.now();
        setToasts(prev => [...prev, { id, title, description, variant }]);
        setTimeout(() => setToasts(prev => prev.filter(t => t.id !== id)), 3000);
      }, []);
      return (
        <ToastContext.Provider value={{ toast }}>
          {children}
          <div className="fixed bottom-4 right-4 z-[100] flex flex-col gap-2">
            {toasts.map(t => (
              <div key={t.id} className={`p-4 rounded-lg shadow-lg animate-slide-up ${t.variant === 'destructive' ? 'bg-destructive text-destructive-foreground' : 'bg-card border border-border'}`}>
                <p className="font-medium">{t.title}</p>
                {t.description && <p className="text-sm text-muted-foreground">{t.description}</p>}
              </div>
            ))}
          </div>
        </ToastContext.Provider>
      );
    };
    const useToast = () => useContext(ToastContext);

    // Cart Context
    const CartContext = createContext();
    const CartProvider = ({ children }) => {
      const [items, setItems] = useState([]);
      const { toast } = useToast();
      const addToCart = useCallback((product, quantity = 1) => {
        setItems(prev => {
          const existing = prev.find(item => item.product.id === product.id);
          if (existing) {
            toast({ title: "Updated cart", description: `${product.name} quantity updated` });
            return prev.map(item => item.product.id === product.id ? { ...item, quantity: item.quantity + quantity } : item);
          }
          toast({ title: "Added to cart", description: `${product.name} added to your cart` });
          return [...prev, { product, quantity }];
        });
      }, [toast]);
      const removeFromCart = useCallback((productId) => {
        setItems(prev => {
          const item = prev.find(i => i.product.id === productId);
          if (item) toast({ title: "Removed from cart", description: `${item.product.name} removed from your cart` });
          return prev.filter(item => item.product.id !== productId);
        });
      }, [toast]);
      const updateQuantity = useCallback((productId, quantity) => {
        if (quantity <= 0) { removeFromCart(productId); return; }
        setItems(prev => prev.map(item => item.product.id === productId ? { ...item, quantity } : item));
      }, [removeFromCart]);
      const clearCart = useCallback(() => { setItems([]); toast({ title: "Cart cleared", description: "All items have been removed" }); }, [toast]);
      const getCartTotal = useCallback(() => items.reduce((t, i) => t + i.product.price * i.quantity, 0), [items]);
      const getCartCount = useCallback(() => items.reduce((c, i) => c + i.quantity, 0), [items]);
      const isInCart = useCallback((id) => items.some(i => i.product.id === id), [items]);
      return <CartContext.Provider value={{ items, addToCart, removeFromCart, updateQuantity, clearCart, getCartTotal, getCartCount, isInCart }}>{children}</CartContext.Provider>;
    };
    const useCart = () => useContext(CartContext);

    // Compare Context
    const CompareContext = createContext();
    const CompareProvider = ({ children }) => {
      const [compareItems, setCompareItems] = useState([]);
      const { toast } = useToast();
      const canAddMore = useCallback(() => compareItems.length < 3, [compareItems.length]);
      const addToCompare = useCallback((product) => {
        if (compareItems.some(i => i.id === product.id)) { toast({ title: "Already in comparison", description: `${product.name} is already selected`, variant: "destructive" }); return false; }
        if (!canAddMore()) { toast({ title: "Comparison limit reached", description: "You can compare up to 3 products", variant: "destructive" }); return false; }
        setCompareItems(prev => [...prev, product]);
        toast({ title: "Added to comparison", description: `${product.name} added. ${2 - compareItems.length} slots remaining.` });
        return true;
      }, [compareItems, canAddMore, toast]);
      const removeFromCompare = useCallback((productId) => {
        setCompareItems(prev => {
          const item = prev.find(p => p.id === productId);
          if (item) toast({ title: "Removed from comparison", description: `${item.name} removed` });
          return prev.filter(p => p.id !== productId);
        });
      }, [toast]);
      const clearCompare = useCallback(() => { setCompareItems([]); toast({ title: "Comparison cleared" }); }, [toast]);
      const isInCompare = useCallback((id) => compareItems.some(i => i.id === id), [compareItems]);
      return <CompareContext.Provider value={{ compareItems, addToCompare, removeFromCompare, clearCompare, isInCompare, canAddMore }}>{children}</CompareContext.Provider>;
    };
    const useCompare = () => useContext(CompareContext);

    // Icons
    const SearchIcon = () => <svg className="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>;
    const CartIcon = () => <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>;
    const MenuIcon = () => <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="18" x2="20" y2="18"/></svg>;
    const XIcon = () => <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>;
    const ChevronDownIcon = () => <svg className="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polyline points="6,9 12,15 18,9"/></svg>;
    const ChevronLeftIcon = () => <svg className="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polyline points="15,18 9,12 15,6"/></svg>;
    const ChevronRightIcon = () => <svg className="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polyline points="9,6 15,12 9,18"/></svg>;
    const StarIcon = ({ fill }) => <svg className={`h-3 w-3 ${fill ? 'fill-current' : ''}`} viewBox="0 0 24 24"><polygon points="12,2 15,8.5 22,9 17,14 18,21 12,17.5 6,21 7,14 2,9 9,8.5" fill={fill ? 'currentColor' : 'none'} stroke="currentColor"/></svg>;
    const CompareIcon = () => <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m16 3 4 4-4 4M20 7H4M8 21l-4-4 4-4M4 17h16"/></svg>;
    const CheckIcon = () => <svg className="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polyline points="20,6 9,17 4,12"/></svg>;
    const MinusIcon = () => <svg className="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"/></svg>;
    const PlusIcon = () => <svg className="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>;
    const TrashIcon = () => <svg className="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polyline points="3,6 5,6 21,6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>;
    const TruckIcon = () => <svg className="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="1" y="3" width="15" height="13"/><polygon points="16,8 20,8 23,11 23,16 16,16"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>;
    const ShieldIcon = () => <svg className="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>;
    const RotateIcon = () => <svg className="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M1 4v6h6M23 20v-6h-6"/><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/></svg>;
    const BagIcon = () => <svg className="h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>;

    const formatPrice = (price) => new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 0 }).format(price);

    // Button Component
    const Button = ({ children, variant = 'default', size = 'default', className = '', disabled, onClick, type = 'button' }) => {
      const base = "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus:outline-none disabled:opacity-50 disabled:pointer-events-none";
      const variants = {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
      };
      const sizes = { default: "h-10 px-4 py-2", sm: "h-9 px-3 rounded-md", lg: "h-11 px-8 rounded-md", icon: "h-10 w-10" };
      return <button type={type} disabled={disabled} onClick={onClick} className={`${base} ${variants[variant]} ${sizes[size]} ${className}`}>{children}</button>;
    };

    // Header Component
    const Header = ({ currentPage, setCurrentPage, setProductId }) => {
      const [isMenuOpen, setIsMenuOpen] = useState(false);
      const [searchQuery, setSearchQuery] = useState('');
      const { getCartCount } = useCart();
      const { compareItems } = useCompare();
      const handleSearch = (e) => { e.preventDefault(); if (searchQuery.trim()) { setCurrentPage('category'); setSearchQuery(''); } };
      return (
        <header className="sticky top-0 z-50 bg-card shadow-md">
          <div className="bg-primary text-primary-foreground">
            <div className="max-w-7xl mx-auto px-4 py-2 flex justify-between items-center text-sm">
              <div className="hidden md:flex items-center gap-4"><span>üìû 1800-123-4567</span><span>‚úâÔ∏è support@dmobiles.com</span></div>
              <div className="flex items-center gap-4 mx-auto md:mx-0"><span>üöö Free Delivery on orders above ‚Çπ999</span></div>
            </div>
          </div>
          <div className="max-w-7xl mx-auto px-4 py-3">
            <div className="flex items-center justify-between gap-4">
              <button onClick={() => setCurrentPage('home')} className="flex-shrink-0"><h1 className="text-lg md:text-xl font-bold text-primary">D Mobiles<span className="text-accent"> & Home Appliances</span></h1></button>
              <form onSubmit={handleSearch} className="hidden md:flex flex-1 max-w-xl">
                <div className="relative w-full">
                  <input type="text" placeholder="Search for mobiles, appliances..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} className="w-full h-10 pr-12 px-3 py-2 rounded-md bg-secondary border-0 text-sm focus:outline-none focus:ring-2 focus:ring-primary" />
                  <button type="submit" className="absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 bg-accent hover:bg-accent/90 text-accent-foreground rounded-md flex items-center justify-center"><SearchIcon /></button>
                </div>
              </form>
              <div className="flex items-center gap-2 md:gap-4">
                <button onClick={() => setCurrentPage('compare')} className="relative p-2 rounded-md hover:bg-accent/10"><CompareIcon />{compareItems.length > 0 && <span className="absolute -top-1 -right-1 bg-accent text-accent-foreground text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold">{compareItems.length}</span>}</button>
                <button onClick={() => setCurrentPage('cart')} className="relative p-2 rounded-md hover:bg-accent/10"><CartIcon />{getCartCount() > 0 && <span className="absolute -top-1 -right-1 bg-accent text-accent-foreground text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold">{getCartCount()}</span>}</button>
                <button className="md:hidden p-2" onClick={() => setIsMenuOpen(!isMenuOpen)}>{isMenuOpen ? <XIcon /> : <MenuIcon />}</button>
              </div>
            </div>
            <form onSubmit={handleSearch} className="md:hidden mt-3">
              <div className="relative">
                <input type="text" placeholder="Search for mobiles, appliances..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} className="w-full h-10 pr-12 px-3 py-2 rounded-md bg-secondary border-0 text-sm" />
                <button type="submit" className="absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 bg-accent hover:bg-accent/90 text-accent-foreground rounded-md flex items-center justify-center"><SearchIcon /></button>
              </div>
            </form>
          </div>
          <div className="hidden md:block border-t border-border">
            <nav className="max-w-7xl mx-auto px-4">
              <ul className="flex items-center gap-1">
                <li><button onClick={() => setCurrentPage('home')} className="px-4 py-3 text-sm font-medium text-foreground hover:text-primary">Home</button></li>
                <li><button onClick={() => { setCurrentPage('category'); }} className="px-4 py-3 text-sm font-medium text-foreground hover:text-primary inline-flex items-center gap-1"><span>üì±</span>Mobiles & Tablets<ChevronDownIcon /></button></li>
                <li><button onClick={() => { setCurrentPage('category'); }} className="px-4 py-3 text-sm font-medium text-foreground hover:text-primary inline-flex items-center gap-1"><span>üè†</span>Home Appliances<ChevronDownIcon /></button></li>
                <li><button onClick={() => setCurrentPage('compare')} className="px-4 py-3 text-sm font-medium text-foreground hover:text-primary inline-flex items-center gap-1"><span>üîÑ</span>Compare</button></li>
              </ul>
            </nav>
          </div>
          {isMenuOpen && (
            <div className="md:hidden border-t border-border bg-card animate-slide-up">
              <nav className="max-w-7xl mx-auto px-4 py-4">
                <ul className="space-y-3">
                  <li><button onClick={() => { setCurrentPage('home'); setIsMenuOpen(false); }} className="block py-2 text-foreground hover:text-primary">Home</button></li>
                  <li><button onClick={() => { setCurrentPage('category'); setIsMenuOpen(false); }} className="block py-2 text-foreground hover:text-primary">üì± Mobiles & Tablets</button></li>
                  <li><button onClick={() => { setCurrentPage('category'); setIsMenuOpen(false); }} className="block py-2 text-foreground hover:text-primary">üè† Home Appliances</button></li>
                  <li><button onClick={() => { setCurrentPage('compare'); setIsMenuOpen(false); }} className="block py-2 text-foreground hover:text-primary">üîÑ Compare ({compareItems.length}/3)</button></li>
                  <li><button onClick={() => { setCurrentPage('cart'); setIsMenuOpen(false); }} className="block py-2 text-foreground hover:text-primary">üõí Cart ({getCartCount()})</button></li>
                </ul>
              </nav>
            </div>
          )}
        </header>
      );
    };

    // Footer Component
    const Footer = ({ setCurrentPage }) => (
      <footer className="bg-foreground text-background mt-auto">
        <div className="border-b border-background/10">
          <div className="max-w-7xl mx-auto px-4 py-6">
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
              <div className="flex flex-col items-center gap-2"><span className="text-3xl">üöö</span><span className="text-sm font-medium">Free Delivery</span><span className="text-xs text-background/70">On orders above ‚Çπ999</span></div>
              <div className="flex flex-col items-center gap-2"><span className="text-3xl">üîí</span><span className="text-sm font-medium">Secure Payment</span><span className="text-xs text-background/70">100% Protected</span></div>
              <div className="flex flex-col items-center gap-2"><span className="text-3xl">‚Ü©Ô∏è</span><span className="text-sm font-medium">Easy Returns</span><span className="text-xs text-background/70">7 Day Return Policy</span></div>
              <div className="flex flex-col items-center gap-2"><span className="text-3xl">üõ°Ô∏è</span><span className="text-sm font-medium">Warranty</span><span className="text-xs text-background/70">Genuine Products</span></div>
            </div>
          </div>
        </div>
        <div className="max-w-7xl mx-auto px-4 py-10">
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div>
              <h3 className="text-lg font-bold mb-4">D Mobiles <span className="text-accent">& Home Appliances</span></h3>
              <p className="text-background/70 text-sm mb-4">Your trusted destination for the latest mobiles and home appliances at the best prices.</p>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Quick Links</h4>
              <ul className="space-y-2 text-sm">
                <li><button onClick={() => setCurrentPage('home')} className="text-background/70 hover:text-background">Home</button></li>
                <li><button onClick={() => setCurrentPage('category')} className="text-background/70 hover:text-background">Mobiles & Tablets</button></li>
                <li><button onClick={() => setCurrentPage('category')} className="text-background/70 hover:text-background">Home Appliances</button></li>
                <li><button onClick={() => setCurrentPage('compare')} className="text-background/70 hover:text-background">Compare Products</button></li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Customer Service</h4>
              <ul className="space-y-2 text-sm text-background/70">
                <li>Track Your Order</li><li>Return Policy</li><li>Warranty Information</li><li>FAQs</li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Contact Us</h4>
              <ul className="space-y-3 text-sm">
                <li><p className="text-background/70">Toll Free</p><p className="font-medium">1800-123-4567</p></li>
                <li><p className="text-background/70">Email</p><p className="font-medium">support@dmobiles.com</p></li>
              </ul>
            </div>
          </div>
        </div>
        <div className="border-t border-background/10">
          <div className="max-w-7xl mx-auto px-4 py-4 text-sm text-background/70 text-center">¬© 2024 D Mobiles & Home Appliances. All rights reserved.</div>
        </div>
      </footer>
    );

    // Product Card Component
    const ProductCard = ({ product, setCurrentPage, setProductId }) => {
      const { addToCart, isInCart } = useCart();
      const { addToCompare, removeFromCompare, isInCompare } = useCompare();
      const inCompare = isInCompare(product.id);
      const inCart = isInCart(product.id);
      const handleCompareToggle = (e) => { e.stopPropagation(); inCompare ? removeFromCompare(product.id) : addToCompare(product); };
      const handleAddToCart = (e) => { e.stopPropagation(); addToCart(product); };
      return (
        <div className="group overflow-hidden rounded-lg border bg-card shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 relative">
          {product.discount > 0 && <div className="absolute top-2 left-2 z-10 bg-sale text-sale-foreground text-xs font-bold px-2 py-1 rounded">{product.discount}% OFF</div>}
          <div className="absolute top-2 right-2 z-10 flex items-center gap-1 bg-card/90 backdrop-blur-sm rounded px-2 py-1 cursor-pointer" onClick={handleCompareToggle}>
            <input type="checkbox" checked={inCompare} readOnly className="h-4 w-4 rounded border-primary" />
            <span className="text-xs font-medium">Compare</span>
          </div>
          <button onClick={() => { setProductId(product.id); setCurrentPage('product'); }} className="block w-full text-left">
            <div className="relative aspect-square overflow-hidden bg-secondary">
              <img src={product.image} alt={product.name} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
              {!product.inStock && <div className="absolute inset-0 bg-foreground/50 flex items-center justify-center"><span className="bg-card text-foreground px-4 py-2 rounded font-semibold">Out of Stock</span></div>}
            </div>
            <div className="p-4">
              <p className="text-xs text-muted-foreground uppercase tracking-wider mb-1">{product.brand}</p>
              <h3 className="font-semibold text-foreground line-clamp-2 min-h-[2.5rem] mb-2 group-hover:text-primary">{product.name}</h3>
              <div className="flex items-center gap-1 mb-2">
                <div className="flex items-center gap-0.5 bg-success text-success-foreground text-xs px-1.5 py-0.5 rounded"><span>{product.rating}</span><StarIcon fill /></div>
                <span className="text-xs text-muted-foreground">({product.reviews.toLocaleString()})</span>
              </div>
              <div className="flex items-baseline gap-2 mb-2">
                <span className="text-lg font-bold text-foreground">{formatPrice(product.price)}</span>
                {product.mrp > product.price && <span className="text-sm text-muted-foreground line-through">{formatPrice(product.mrp)}</span>}
              </div>
              {product.emi && <p className="text-xs text-success font-medium mb-3">EMI from {product.emi}</p>}
              <div className="flex flex-wrap gap-1 mb-3">{product.features.slice(0, 2).map((f, i) => <span key={i} className="text-xs bg-secondary text-secondary-foreground px-2 py-0.5 rounded">{f}</span>)}</div>
            </div>
          </button>
          <div className="p-4 pt-0"><Button onClick={handleAddToCart} disabled={!product.inStock} className="w-full bg-accent hover:bg-accent/90 text-accent-foreground">{inCart ? <><CheckIcon /> Added to Cart</> : <><CartIcon /> Add to Cart</>}</Button></div>
        </div>
      );
    };

    // Category Card Component
    const CategoryCard = ({ category, setCurrentPage }) => (
      <button onClick={() => setCurrentPage('category')} className="block w-full">
        <div className="group overflow-hidden rounded-lg border bg-card shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
          <div className="relative aspect-[4/3] overflow-hidden">
            <img src={category.image} alt={category.name} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
            <div className="absolute inset-0 bg-gradient-to-t from-foreground/80 to-transparent" />
            <div className="absolute bottom-0 left-0 right-0 p-4 text-card">
              <span className="text-3xl mb-2 block">{category.icon}</span>
              <h3 className="text-lg font-semibold">{category.name}</h3>
              <p className="text-sm opacity-80">{getProductsByCategory(category.id).length} Products</p>
            </div>
          </div>
        </div>
      </button>
    );

    // Hero Slider Component
    const HeroSlider = ({ setCurrentPage }) => {
      const [currentSlide, setCurrentSlide] = useState(0);
      const slides = [
        { id: 1, title: 'New Year Sale', subtitle: 'Up to 40% Off on Smartphones', description: 'Latest models from Samsung, Apple & OnePlus', cta: 'Shop Now', bgGradient: 'from-primary to-primary/80' },
        { id: 2, title: 'Home Appliance Fest', subtitle: 'Premium Appliances at Best Prices', description: 'Refrigerators, ACs & Washing Machines', cta: 'Explore Deals', bgGradient: 'from-accent to-accent/80' },
        { id: 3, title: 'Easy EMI Options', subtitle: 'No Cost EMI Available', description: 'On orders above ‚Çπ10,000', cta: 'Learn More', bgGradient: 'from-success to-success/80' },
      ];
      useEffect(() => { const timer = setInterval(() => setCurrentSlide((p) => (p + 1) % slides.length), 5000); return () => clearInterval(timer); }, []);
      return (
        <section className="relative overflow-hidden">
          <div className="relative h-[300px] md:h-[450px] lg:h-[500px]">
            {slides.map((slide, index) => (
              <div key={slide.id} className={`absolute inset-0 transition-opacity duration-700 ${index === currentSlide ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}>
                <div className={`absolute inset-0 bg-gradient-to-r ${slide.bgGradient}`} />
                <div className="max-w-7xl mx-auto px-4 h-full flex items-center relative z-10">
                  <div className="max-w-xl text-primary-foreground">
                    <span className="inline-block px-3 py-1 bg-primary-foreground/20 rounded-full text-sm mb-4">{slide.title}</span>
                    <h2 className="text-3xl md:text-5xl font-bold mb-4 leading-tight">{slide.subtitle}</h2>
                    <p className="text-lg md:text-xl opacity-90 mb-6">{slide.description}</p>
                    <Button variant="secondary" size="lg" onClick={() => setCurrentPage('category')}>{slide.cta} ‚Üí</Button>
                  </div>
                </div>
              </div>
            ))}
          </div>
          <button onClick={() => setCurrentSlide((p) => (p - 1 + slides.length) % slides.length)} className="absolute left-4 top-1/2 -translate-y-1/2 bg-card/80 hover:bg-card text-foreground p-2 rounded-full shadow-lg z-20"><ChevronLeftIcon /></button>
          <button onClick={() => setCurrentSlide((p) => (p + 1) % slides.length)} className="absolute right-4 top-1/2 -translate-y-1/2 bg-card/80 hover:bg-card text-foreground p-2 rounded-full shadow-lg z-20"><ChevronRightIcon /></button>
          <div className="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-20">
            {slides.map((_, i) => <button key={i} onClick={() => setCurrentSlide(i)} className={`w-3 h-3 rounded-full transition-all ${i === currentSlide ? 'bg-primary-foreground w-8' : 'bg-primary-foreground/50'}`} />)}
          </div>
        </section>
      );
    };

    // Compare Bar Component
    const CompareBar = ({ setCurrentPage }) => {
      const { compareItems, removeFromCompare, clearCompare } = useCompare();
      if (compareItems.length === 0) return null;
      return (
        <div className="fixed bottom-0 left-0 right-0 bg-card border-t border-border shadow-xl z-50 animate-slide-up">
          <div className="max-w-7xl mx-auto px-4 py-3">
            <div className="flex items-center justify-between gap-4">
              <div className="flex items-center gap-3 overflow-x-auto">
                <div className="flex items-center gap-1 text-primary font-medium flex-shrink-0"><CompareIcon /><span className="text-sm">Compare ({compareItems.length}/3)</span></div>
                {compareItems.map((p) => (
                  <div key={p.id} className="relative flex-shrink-0 group">
                    <img src={p.image} alt={p.name} className="w-12 h-12 object-cover rounded-lg border border-border" />
                    <button onClick={() => removeFromCompare(p.id)} className="absolute -top-1 -right-1 bg-destructive text-destructive-foreground rounded-full p-0.5 opacity-0 group-hover:opacity-100"><XIcon /></button>
                  </div>
                ))}
                {Array.from({ length: 3 - compareItems.length }).map((_, i) => <div key={i} className="w-12 h-12 rounded-lg border-2 border-dashed border-border flex items-center justify-center flex-shrink-0"><span className="text-xs text-muted-foreground">+</span></div>)}
              </div>
              <div className="flex items-center gap-2 flex-shrink-0">
                <Button variant="ghost" size="sm" onClick={clearCompare}>Clear All</Button>
                <Button size="sm" disabled={compareItems.length < 2} onClick={() => setCurrentPage('compare')}>Compare Now</Button>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // Home Page
    const HomePage = ({ setCurrentPage, setProductId }) => {
      const featuredProducts = getFeaturedProducts();
      const bestSellers = getBestSellers();
      return (
        <main className="flex-1">
          <HeroSlider setCurrentPage={setCurrentPage} />
          <section className="py-10 md:py-16">
            <div className="max-w-7xl mx-auto px-4">
              <div className="text-center mb-8"><h2 className="text-2xl md:text-3xl font-bold text-foreground mb-2">Shop by Category</h2><p className="text-muted-foreground">Explore our wide range of products</p></div>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">{categories.map((c) => <CategoryCard key={c.id} category={c} setCurrentPage={setCurrentPage} />)}</div>
            </div>
          </section>
          <section className="py-10 md:py-16 bg-secondary">
            <div className="max-w-7xl mx-auto px-4">
              <div className="flex items-center justify-between mb-8"><div><h2 className="text-2xl md:text-3xl font-bold text-foreground mb-1">Featured Products</h2><p className="text-muted-foreground">Top-rated items you'll love</p></div><button onClick={() => setCurrentPage('category')} className="text-primary font-medium hover:underline hidden md:block">View All ‚Üí</button></div>
              <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">{featuredProducts.map((p) => <ProductCard key={p.id} product={p} setCurrentPage={setCurrentPage} setProductId={setProductId} />)}</div>
            </div>
          </section>
          <section className="py-10 md:py-16">
            <div className="max-w-7xl mx-auto px-4">
              <div className="bg-gradient-hero rounded-2xl p-8 md:p-12 text-primary-foreground overflow-hidden relative">
                <div className="relative z-10 max-w-xl">
                  <span className="inline-block px-3 py-1 bg-accent text-accent-foreground text-sm font-semibold rounded-full mb-4">Limited Time Offer</span>
                  <h2 className="text-3xl md:text-4xl font-bold mb-4">No Cost EMI Available</h2>
                  <p className="text-lg opacity-90 mb-6">Shop now and pay in easy monthly installments with 0% interest. Available on orders above ‚Çπ10,000.</p>
                  <Button variant="secondary" size="lg" onClick={() => setCurrentPage('category')}>Shop Now ‚Üí</Button>
                </div>
              </div>
            </div>
          </section>
          <section className="py-10 md:py-16 bg-secondary">
            <div className="max-w-7xl mx-auto px-4">
              <div className="flex items-center justify-between mb-8"><div><h2 className="text-2xl md:text-3xl font-bold text-foreground mb-1">Best Sellers</h2><p className="text-muted-foreground">Most popular products</p></div></div>
              <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">{bestSellers.map((p) => <ProductCard key={p.id} product={p} setCurrentPage={setCurrentPage} setProductId={setProductId} />)}</div>
            </div>
          </section>
          <section className="py-10 md:py-16">
            <div className="max-w-7xl mx-auto px-4">
              <div className="text-center mb-10"><h2 className="text-2xl md:text-3xl font-bold text-foreground mb-2">Why Choose D Mobiles?</h2><p className="text-muted-foreground">Your satisfaction is our priority</p></div>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div className="bg-card rounded-xl p-6 text-center border border-border hover:shadow-lg transition-shadow"><div className="w-16 h-16 mx-auto mb-4 bg-primary/10 rounded-full flex items-center justify-center"><span className="text-3xl">üíØ</span></div><h3 className="text-lg font-semibold text-foreground mb-2">100% Genuine Products</h3><p className="text-muted-foreground text-sm">All products come with manufacturer warranty.</p></div>
                <div className="bg-card rounded-xl p-6 text-center border border-border hover:shadow-lg transition-shadow"><div className="w-16 h-16 mx-auto mb-4 bg-accent/10 rounded-full flex items-center justify-center"><span className="text-3xl">üèÜ</span></div><h3 className="text-lg font-semibold text-foreground mb-2">Best Price Guarantee</h3><p className="text-muted-foreground text-sm">We offer competitive prices and match any lower price.</p></div>
                <div className="bg-card rounded-xl p-6 text-center border border-border hover:shadow-lg transition-shadow"><div className="w-16 h-16 mx-auto mb-4 bg-success/10 rounded-full flex items-center justify-center"><span className="text-3xl">ü§ù</span></div><h3 className="text-lg font-semibold text-foreground mb-2">Expert Support</h3><p className="text-muted-foreground text-sm">Our trained team is ready to help you.</p></div>
              </div>
            </div>
          </section>
        </main>
      );
    };

    // Category Page
    const CategoryPage = ({ setCurrentPage, setProductId }) => {
      const [sortBy, setSortBy] = useState('popularity');
      const filteredProducts = useMemo(() => {
        let result = [...products];
        switch (sortBy) {
          case 'price-low': result.sort((a, b) => a.price - b.price); break;
          case 'price-high': result.sort((a, b) => b.price - a.price); break;
          case 'rating': result.sort((a, b) => b.rating - a.rating); break;
          case 'discount': result.sort((a, b) => b.discount - a.discount); break;
          default: result.sort((a, b) => b.reviews - a.reviews); break;
        }
        return result;
      }, [sortBy]);
      return (
        <main className="flex-1 py-6">
          <div className="max-w-7xl mx-auto px-4">
            <div className="mb-6"><h1 className="text-2xl md:text-3xl font-bold text-foreground mb-2">All Products</h1><p className="text-muted-foreground">{filteredProducts.length} products found</p></div>
            <div className="flex items-center justify-end mb-6 gap-4">
              <span className="text-sm text-muted-foreground hidden sm:inline">Sort by:</span>
              <select value={sortBy} onChange={(e) => setSortBy(e.target.value)} className="h-10 px-3 py-2 rounded-md border border-input bg-background text-sm">
                <option value="popularity">Popularity</option>
                <option value="price-low">Price: Low to High</option>
                <option value="price-high">Price: High to Low</option>
                <option value="rating">Rating</option>
                <option value="discount">Discount</option>
              </select>
            </div>
            <div className="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6">{filteredProducts.map((p) => <ProductCard key={p.id} product={p} setCurrentPage={setCurrentPage} setProductId={setProductId} />)}</div>
          </div>
        </main>
      );
    };

    // Product Detail Page
    const ProductDetailPage = ({ productId, setCurrentPage, setProductId }) => {
      const [quantity, setQuantity] = useState(1);
      const [currentImage, setCurrentImage] = useState(0);
      const { addToCart, isInCart } = useCart();
      const { addToCompare, isInCompare, removeFromCompare } = useCompare();
      const product = getProductById(productId);
      if (!product) return <main className="flex-1 flex items-center justify-center"><div className="text-center"><h1 className="text-2xl font-bold text-foreground mb-4">Product not found</h1><Button onClick={() => setCurrentPage('home')}>Go to Home</Button></div></main>;
      const inCart = isInCart(product.id);
      const inCompare = isInCompare(product.id);
      const relatedProducts = products.filter((p) => p.category === product.category && p.id !== product.id).slice(0, 4);
      return (
        <main className="flex-1 py-6">
          <div className="max-w-7xl mx-auto px-4">
            <nav className="flex items-center gap-2 text-sm mb-6"><button onClick={() => setCurrentPage('home')} className="text-muted-foreground hover:text-primary">Home</button><span className="text-muted-foreground">/</span><button onClick={() => setCurrentPage('category')} className="text-muted-foreground hover:text-primary">{product.category === 'mobiles' ? 'Mobiles & Tablets' : 'Home Appliances'}</button><span className="text-muted-foreground">/</span><span className="text-foreground truncate">{product.name}</span></nav>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
              <div className="space-y-4">
                <div className="relative aspect-square bg-secondary rounded-lg overflow-hidden"><img src={product.images[currentImage]} alt={product.name} className="w-full h-full object-contain" /></div>
                {product.images.length > 1 && <div className="flex gap-2 overflow-x-auto pb-2">{product.images.map((img, i) => <button key={i} onClick={() => setCurrentImage(i)} className={`flex-shrink-0 w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden border-2 ${i === currentImage ? 'border-primary' : 'border-border'}`}><img src={img} alt="" className="w-full h-full object-cover" /></button>)}</div>}
              </div>
              <div>
                <p className="text-sm text-primary font-medium uppercase tracking-wider mb-2">{product.brand}</p>
                <h1 className="text-2xl md:text-3xl font-bold text-foreground mb-3">{product.name}</h1>
                <div className="flex items-center gap-3 mb-4"><div className="flex items-center gap-1 bg-success text-success-foreground text-sm px-2 py-1 rounded"><span className="font-medium">{product.rating}</span><StarIcon fill /></div><span className="text-muted-foreground">{product.reviews.toLocaleString()} Reviews</span></div>
                <div className="bg-secondary rounded-lg p-4 mb-6">
                  <div className="flex items-baseline gap-3 mb-2"><span className="text-3xl font-bold text-foreground">{formatPrice(product.price)}</span>{product.mrp > product.price && <><span className="text-lg text-muted-foreground line-through">{formatPrice(product.mrp)}</span><span className="text-lg text-success font-semibold">{product.discount}% off</span></>}</div>
                  {product.emi && <p className="text-sm text-muted-foreground">EMI available from <span className="text-success font-medium">{product.emi}</span></p>}
                </div>
                <div className="mb-6"><h3 className="font-semibold text-foreground mb-3">Highlights</h3><ul className="space-y-2">{product.features.map((f, i) => <li key={i} className="flex items-center gap-2 text-sm"><CheckIcon className="h-4 w-4 text-success" /><span>{f}</span></li>)}</ul></div>
                <div className="flex items-center gap-4 mb-6"><span className="text-sm font-medium">Quantity:</span><div className="flex items-center gap-2"><Button variant="outline" size="icon" onClick={() => setQuantity(Math.max(1, quantity - 1))} disabled={quantity <= 1}><MinusIcon /></Button><span className="w-10 text-center font-medium">{quantity}</span><Button variant="outline" size="icon" onClick={() => setQuantity(quantity + 1)}><PlusIcon /></Button></div></div>
                <div className="flex flex-col sm:flex-row gap-3 mb-6">
                  <Button onClick={() => addToCart(product, quantity)} disabled={!product.inStock} className="flex-1 bg-accent hover:bg-accent/90 text-accent-foreground" size="lg">{inCart ? <><CheckIcon /> Added to Cart</> : <><CartIcon /> Add to Cart</>}</Button>
                  <Button onClick={() => { addToCart(product, quantity); setCurrentPage('cart'); }} disabled={!product.inStock} size="lg" className="flex-1">Buy Now</Button>
                </div>
                <Button variant="outline" onClick={() => inCompare ? removeFromCompare(product.id) : addToCompare(product)} className={inCompare ? 'border-primary text-primary' : ''}><CompareIcon />{inCompare ? 'Remove from Compare' : 'Add to Compare'}</Button>
                {!product.inStock && <p className="text-destructive font-medium mt-4">Currently out of stock</p>}
                <div className="grid grid-cols-3 gap-4 mt-8 pt-6 border-t border-border">
                  <div className="text-center"><TruckIcon className="h-6 w-6 mx-auto mb-2 text-primary" /><p className="text-xs text-muted-foreground">Free Delivery</p></div>
                  <div className="text-center"><ShieldIcon className="h-6 w-6 mx-auto mb-2 text-primary" /><p className="text-xs text-muted-foreground">Genuine Warranty</p></div>
                  <div className="text-center"><RotateIcon className="h-6 w-6 mx-auto mb-2 text-primary" /><p className="text-xs text-muted-foreground">Easy Returns</p></div>
                </div>
              </div>
            </div>
            <section className="mb-12"><h2 className="text-xl font-bold text-foreground mb-4">Specifications</h2><div className="bg-card rounded-lg border border-border overflow-hidden"><table className="w-full"><tbody>{Object.entries(product.specs).map(([k, v], i) => <tr key={k} className={i % 2 === 0 ? 'bg-secondary/50' : 'bg-card'}><td className="px-4 py-3 font-medium text-foreground w-1/3">{k}</td><td className="px-4 py-3 text-muted-foreground">{v}</td></tr>)}</tbody></table></div></section>
            {relatedProducts.length > 0 && <section><h2 className="text-xl font-bold text-foreground mb-4">Related Products</h2><div className="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">{relatedProducts.map((p) => <ProductCard key={p.id} product={p} setCurrentPage={setCurrentPage} setProductId={setProductId} />)}</div></section>}
          </div>
        </main>
      );
    };

    // Cart Page
    const CartPage = ({ setCurrentPage }) => {
      const { items, getCartTotal, clearCart, updateQuantity, removeFromCart } = useCart();
      const subtotal = getCartTotal();
      const savings = items.reduce((t, i) => t + (i.product.mrp - i.product.price) * i.quantity, 0);
      const deliveryFee = subtotal >= 999 ? 0 : 99;
      const total = subtotal + deliveryFee;
      return (
        <main className="flex-1 py-6">
          <div className="max-w-7xl mx-auto px-4">
            <h1 className="text-2xl md:text-3xl font-bold text-foreground mb-6">Shopping Cart</h1>
            {items.length > 0 ? (
              <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div className="lg:col-span-2 space-y-4">
                  <div className="flex items-center justify-between mb-2"><p className="text-muted-foreground">{items.length} item{items.length > 1 ? 's' : ''} in cart</p><Button variant="ghost" size="sm" className="text-destructive" onClick={clearCart}><TrashIcon /> Clear Cart</Button></div>
                  {items.map((item) => (
                    <div key={item.product.id} className="flex gap-4 p-4 bg-card rounded-lg border border-border">
                      <img src={item.product.image} alt={item.product.name} className="w-20 h-20 md:w-28 md:h-28 object-cover rounded-lg bg-secondary" />
                      <div className="flex-1 min-w-0">
                        <h3 className="font-semibold text-foreground line-clamp-2">{item.product.name}</h3>
                        <p className="text-sm text-muted-foreground mt-1">{item.product.brand}</p>
                        <div className="flex items-baseline gap-2 mt-2"><span className="text-lg font-bold text-foreground">{formatPrice(item.product.price)}</span>{item.product.mrp > item.product.price && <><span className="text-sm text-muted-foreground line-through">{formatPrice(item.product.mrp)}</span><span className="text-sm text-success font-medium">{item.product.discount}% off</span></>}</div>
                        <div className="flex items-center justify-between mt-3">
                          <div className="flex items-center gap-2"><Button variant="outline" size="icon" className="h-8 w-8" onClick={() => updateQuantity(item.product.id, item.quantity - 1)}><MinusIcon /></Button><span className="w-8 text-center font-medium">{item.quantity}</span><Button variant="outline" size="icon" className="h-8 w-8" onClick={() => updateQuantity(item.product.id, item.quantity + 1)}><PlusIcon /></Button></div>
                          <Button variant="ghost" size="icon" className="text-destructive" onClick={() => removeFromCart(item.product.id)}><TrashIcon /></Button>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
                <div className="lg:col-span-1">
                  <div className="bg-card rounded-lg border border-border p-6 sticky top-24">
                    <h2 className="text-lg font-semibold text-foreground mb-4">Order Summary</h2>
                    <div className="space-y-3 mb-6">
                      <div className="flex justify-between text-foreground"><span>Subtotal</span><span>{formatPrice(subtotal)}</span></div>
                      {savings > 0 && <div className="flex justify-between text-success"><span>You Save</span><span>-{formatPrice(savings)}</span></div>}
                      <div className="flex justify-between text-foreground"><span>Delivery</span><span>{deliveryFee === 0 ? <span className="text-success">FREE</span> : formatPrice(deliveryFee)}</span></div>
                      {deliveryFee > 0 && <p className="text-xs text-muted-foreground">Add {formatPrice(999 - subtotal)} more for free delivery</p>}
                    </div>
                    <div className="border-t border-border pt-4 mb-6"><div className="flex justify-between text-lg font-bold text-foreground"><span>Total</span><span>{formatPrice(total)}</span></div><p className="text-xs text-muted-foreground mt-1">Inclusive of all taxes</p></div>
                    <Button className="w-full bg-accent hover:bg-accent/90 text-accent-foreground" size="lg">Proceed to Checkout ‚Üí</Button>
                    <div className="mt-4 text-center"><button onClick={() => setCurrentPage('home')} className="text-sm text-primary hover:underline">Continue Shopping</button></div>
                    <div className="mt-6 pt-4 border-t border-border"><div className="flex items-center gap-2 text-xs text-muted-foreground mb-2"><span>üîí</span><span>Secure checkout with SSL encryption</span></div><div className="flex items-center gap-2 text-xs text-muted-foreground"><span>üí≥</span><span>We accept all major payment methods</span></div></div>
                  </div>
                </div>
              </div>
            ) : (
              <div className="text-center py-16"><div className="w-24 h-24 mx-auto mb-6 bg-secondary rounded-full flex items-center justify-center"><BagIcon /></div><h2 className="text-2xl font-bold text-foreground mb-2">Your cart is empty</h2><p className="text-muted-foreground mb-6">Looks like you haven't added anything yet.</p><Button onClick={() => setCurrentPage('home')}>Start Shopping</Button></div>
            )}
          </div>
        </main>
      );
    };

    // Compare Page
    const ComparePage = ({ setCurrentPage, setProductId }) => {
      const { compareItems, removeFromCompare } = useCompare();
      const { addToCart } = useCart();
      const getAllSpecKeys = () => { const keys = new Set(); compareItems.forEach((p) => Object.keys(p.specs).forEach((k) => keys.add(k))); return Array.from(keys); };
      const specKeys = getAllSpecKeys();
      if (compareItems.length === 0) return (
        <main className="flex-1 py-6">
          <div className="max-w-7xl mx-auto px-4">
            <div className="text-center py-16"><div className="text-6xl mb-4">üîÑ</div><h2 className="text-2xl font-bold text-foreground mb-2">No products to compare</h2><p className="text-muted-foreground mb-6">Add products to compare their specifications side by side</p><Button onClick={() => setCurrentPage('category')}>Browse Products</Button></div>
          </div>
        </main>
      );
      return (
        <main className="flex-1 py-6">
          <div className="max-w-7xl mx-auto px-4">
            <div className="mb-6"><h1 className="text-2xl md:text-3xl font-bold text-foreground mb-2">Compare Products</h1><p className="text-muted-foreground">Comparing {compareItems.length} product{compareItems.length > 1 ? 's' : ''}</p></div>
            <div className="bg-card rounded-lg border border-border overflow-x-auto">
              <table className="w-full min-w-[600px]">
                <thead>
                  <tr>
                    <th className="text-left p-4 bg-secondary font-semibold text-foreground w-40">Product</th>
                    {compareItems.map((p) => (
                      <th key={p.id} className="p-4 bg-secondary relative">
                        <button onClick={() => removeFromCompare(p.id)} className="absolute top-2 right-2 p-1 bg-card rounded-full hover:bg-destructive hover:text-destructive-foreground"><XIcon /></button>
                        <button onClick={() => { setProductId(p.id); setCurrentPage('product'); }}><img src={p.image} alt={p.name} className="w-32 h-32 object-contain mx-auto mb-2 bg-card rounded-lg" /><h3 className="font-semibold text-foreground text-sm line-clamp-2 hover:text-primary">{p.name}</h3></button>
                      </th>
                    ))}
                    {Array.from({ length: 3 - compareItems.length }).map((_, i) => <th key={i} className="p-4 bg-secondary"><button onClick={() => setCurrentPage('category')}><div className="w-32 h-32 mx-auto mb-2 border-2 border-dashed border-border rounded-lg flex items-center justify-center hover:border-primary"><span className="text-muted-foreground text-sm">+ Add Product</span></div></button></th>)}
                  </tr>
                </thead>
                <tbody>
                  <tr className="border-b border-border">
                    <td className="p-4 font-medium text-foreground">Price</td>
                    {compareItems.map((p) => { const lowest = Math.min(...compareItems.map((x) => x.price)); const isBest = p.price === lowest && compareItems.length > 1; return <td key={p.id} className={`p-4 text-center ${isBest ? 'bg-success/10' : ''}`}><span className="text-lg font-bold text-foreground">{formatPrice(p.price)}</span>{p.mrp > p.price && <div className="text-sm text-muted-foreground line-through">{formatPrice(p.mrp)}</div>}{isBest && <span className="text-xs text-success font-medium">Best Price</span>}</td>; })}
                    {Array.from({ length: 3 - compareItems.length }).map((_, i) => <td key={i} className="p-4 text-center text-muted-foreground">-</td>)}
                  </tr>
                  <tr className="border-b border-border">
                    <td className="p-4 font-medium text-foreground">Brand</td>
                    {compareItems.map((p) => <td key={p.id} className="p-4 text-center text-foreground">{p.brand}</td>)}
                    {Array.from({ length: 3 - compareItems.length }).map((_, i) => <td key={i} className="p-4 text-center text-muted-foreground">-</td>)}
                  </tr>
                  <tr className="border-b border-border">
                    <td className="p-4 font-medium text-foreground">Rating</td>
                    {compareItems.map((p) => { const highest = Math.max(...compareItems.map((x) => x.rating)); const isBest = p.rating === highest && compareItems.length > 1; return <td key={p.id} className={`p-4 text-center ${isBest ? 'bg-success/10' : ''}`}><div className="flex items-center justify-center gap-1"><span className="font-medium text-foreground">{p.rating}</span><StarIcon fill /></div><span className="text-xs text-muted-foreground">({p.reviews.toLocaleString()} reviews)</span></td>; })}
                    {Array.from({ length: 3 - compareItems.length }).map((_, i) => <td key={i} className="p-4 text-center text-muted-foreground">-</td>)}
                  </tr>
                  {specKeys.map((key) => (
                    <tr key={key} className="border-b border-border">
                      <td className="p-4 font-medium text-foreground">{key}</td>
                      {compareItems.map((p) => <td key={p.id} className="p-4 text-center text-foreground">{p.specs[key] || '-'}</td>)}
                      {Array.from({ length: 3 - compareItems.length }).map((_, i) => <td key={i} className="p-4 text-center text-muted-foreground">-</td>)}
                    </tr>
                  ))}
                  <tr>
                    <td className="p-4"></td>
                    {compareItems.map((p) => <td key={p.id} className="p-4 text-center"><Button onClick={() => addToCart(p)} disabled={!p.inStock} className="w-full max-w-[200px] bg-accent hover:bg-accent/90"><CartIcon /> Add to Cart</Button></td>)}
                    {Array.from({ length: 3 - compareItems.length }).map((_, i) => <td key={i} className="p-4"></td>)}
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </main>
      );
    };

    // Main App
    const App = () => {
      const [currentPage, setCurrentPage] = useState('home');
      const [productId, setProductId] = useState(null);
      return (
        <ToastProvider>
          <CartProvider>
            <CompareProvider>
              <div className="min-h-screen flex flex-col bg-background">
                <Header currentPage={currentPage} setCurrentPage={setCurrentPage} setProductId={setProductId} />
                {currentPage === 'home' && <HomePage setCurrentPage={setCurrentPage} setProductId={setProductId} />}
                {currentPage === 'category' && <CategoryPage setCurrentPage={setCurrentPage} setProductId={setProductId} />}
                {currentPage === 'product' && <ProductDetailPage productId={productId} setCurrentPage={setCurrentPage} setProductId={setProductId} />}
                {currentPage === 'cart' && <CartPage setCurrentPage={setCurrentPage} />}
                {currentPage === 'compare' && <ComparePage setCurrentPage={setCurrentPage} setProductId={setProductId} />}
                <Footer setCurrentPage={setCurrentPage} />
                <CompareBar setCurrentPage={setCurrentPage} />
              </div>
            </CompareProvider>
          </CartProvider>
        </ToastProvider>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
